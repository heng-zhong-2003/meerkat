service counter {
    var _count = 1
    pub def count = _count
    pub def add = fn n => action { _count = _count+n }

    pub def id = fn x => x
    pub def a = id(1145)
}

service compute {
    import counter
    var multiplier = 1
    pub def increment = action { multiplier = multiplier + 1 }
    pub def value = counter.count * multiplier
}

service ui {
    import counter
    import compute
    
    def display = counter.count + compute.value
    def button = action { do counter.add(2); do compute.increment }
}
